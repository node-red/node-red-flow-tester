// GUI test addon for flow tester action
<link rel="stylesheet" href="resources/node-red-contrib-flow-tester-addon/style.css">

<script type="text/javascript">
(function() {
    RED.plugins.registerPlugin("node-red-contrib--flow-tester-addon", {
        type: "flow-tester-addon",
        onadd: function() {
        },
        onremove: function() {
        },
        actions: function () {
            return [
                // plugin for GUI-URL
                {
                    name: "addon:GUI-URL",
                    label: "GUI-URL",
                    onAddItem: function (opt) {
                        // opt contains:
                        // - node: target node
                        // - event: event name
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        // - data: initial data
                        var node = opt.node;
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var data = opt.data;

                        // row0: target
                        var span0 = $("<span/>", {
                            class: "addon-gui-url-span0"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row0);
                        var targetField = $("<input/>", {
                            placeholder: "browser instance name",
                            type: "text",
                            class: "addon-gui-url-target",
                        }).css({
                            display: "inline-block",
                            "margin-left": "8px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span0);
                        if (data && data.target) {
                            targetField.val(data.target);
                        }

                        // row1: url
                        var row1 = $("<div/>", {
                            class: "addon-gui-url-div1"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span1 = $("<span/>", {
                            class: "addon-gui-url-span1"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row1);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("url").appendTo(span1);
                        var urlField = $("<input/>", {
                            placeholder: "http://<target page>",
                            type: "text",
                            class: "addon-gui-url-url",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span1);
                        if (data && data.url) {
                            urlField.val(data.url);
                        }

                        // row2: size(option)
                        var row2 = $("<div/>", {
                            class: "addon-gui-url-div2"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span2 = $("<span/>", {
                            class: "addon-gui-url-span2"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row2);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("size").appendTo(span2);
                        var sizeField = $("<input/>", {
                            placeholder: "(option) width, height",
                            type: "text",
                            class: "addon-gui-url-size",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span2);
                        if (data && data.size) {
                            sizeField.val(data.size);
                        }

                        span0.hide();
                        row1.hide();
                        row2.hide();
                        return true;
                    },
                    onSelect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-url-span0");
                        var row1 = row0.find(".addon-gui-url-div1");
                        var row2 = row0.find(".addon-gui-url-div2");
                        span0.show();
                        row1.show();
                        row2.show();
                    },
                    onUnselect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-url-span0");
                        var row1 = row0.find(".addon-gui-url-div1");
                        var row2 = row0.find(".addon-gui-url-div2");
                        span0.hide();
                        row1.hide();
                        row2.hide();
                    },
                    onSave: function (con) { 
                        var target = con.find(".addon-gui-url-target").val();
                        var url = con.find(".addon-gui-url-url").val();
                        var size = con.find(".addon-gui-url-size").val();
                        return {
                            target: target,
                            url: url,
                            size: size,
                            performCheck: false
                        };
                    }
                },
                // plugin for GUI-Keys
                {
                    name: "addon:GUI-Keys",
                    label: "GUI-Keys",
                    onAddItem: function (opt) {
                        // opt contains:
                        // - node: target node
                        // - event: event name
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        // - data: initial data
                        var node = opt.node;
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var data = opt.data;

                        // row0: target
                        var span0 = $("<span/>", {
                            class: "addon-gui-keys-span0"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row0);
                        var targetField = $("<input/>", {
                            placeholder: "browser instance name",
                            type: "text",
                            class: "addon-gui-keys-target",
                        }).css({
                            display: "inline-block",
                            "margin-left": "8px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span0);
                        if (data && data.target) {
                            targetField.val(data.target);
                        }

                        // row1: key
                        var row1 = $("<div/>", {
                            class: "addon-gui-keys-div1"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span1 = $("<span/>", {
                            class: "addon-gui-keys-span1"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row1);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("key").appendTo(span1);
                        var keyField = $("<input/>", {
                            placeholder: "key1, key2, key3, ...",
                            type: "text",
                            class: "addon-gui-keys-key",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span1);
                        if (data && data.key) {
                            keyField.val(data.key);
                        }

                        span0.hide();
                        row1.hide();
                        return true;
                    },
                    onSelect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-keys-span0");
                        var row1 = row0.find(".addon-gui-keys-div1");
                        span0.show();
                        row1.show();
                    },
                    onUnselect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-keys-span0");
                        var row1 = row0.find(".addon-gui-keys-div1");
                        span0.hide();
                        row1.hide();
                    },
                    onSave: function (con) { 
                        var target = con.find(".addon-gui-keys-target").val();
                        var key = con.find(".addon-gui-keys-key").val();
                        return {
                            target: target,
                            key: key,
                            performCheck: false
                        };
                    }
                },
                // plugin for GUI-saveScreenshot
                {
                    name: "addon:GUI-saveScreenshot",
                    label: "GUI-saveScreenshot",
                    onAddItem: function (opt) {
                        // opt contains:
                        // - node: target node
                        // - event: event name
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        // - data: initial data
                        var node = opt.node;
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var data = opt.data;

                        // row0: target
                        var span0 = $("<span/>", {
                            class: "addon-gui-saveScreenshot-span0"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row0);
                        var targetField = $("<input/>", {
                            placeholder: "browser instance name",
                            type: "text",
                            class: "addon-gui-saveScreenshot-target",
                        }).css({
                            display: "inline-block",
                            "margin-left": "8px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span0);
                        if (data && data.target) {
                            targetField.val(data.target);
                        }

                        // row1: url(option)
                        var row1 = $("<div/>", {
                            class: "addon-gui-saveScreenshot-div1"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span1 = $("<span/>", {
                            class: "addon-gui-saveScreenshot-span1"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row1);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("url").appendTo(span1);
                        var urlField = $("<input/>", {
                            placeholder: "(option) http://<target page>",
                            type: "text",
                            class: "addon-gui-saveScreenshot-url",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span1);
                        if (data && data.url) {
                            urlField.val(data.url);
                        }

                        // row2: filepath
                        var row2 = $("<div/>", {
                            class: "addon-gui-saveScreenshot-div2"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span2 = $("<span/>", {
                            class: "addon-gui-saveScreenshot-span2"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row2);
                        $("<label/>", {
                        }).css({
                            display: "inline-block",
                            "text-align": "right",
                            width: "100px"
                        }).text("filepath").appendTo(span2);
                        var filepathField = $("<input/>", {
                            placeholder: "image file path (.png suffix is required)",
                            type: "text",
                            class: "addon-gui-saveScreenshot-filepath",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span2);
                        if (data && data.filepath) {
                            filepathField.val(data.filepath);
                        }

                        span0.hide();
                        row1.hide();
                        row2.hide();
                        return true;
                    },
                    onSelect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-saveScreenshot-span0");
                        var row1 = row0.find(".addon-gui-saveScreenshot-div1");
                        var row2 = row0.find(".addon-gui-saveScreenshot-div2");
                        span0.show();
                        row1.show();
                        row2.show();
                    },
                    onUnselect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-saveScreenshot-span0");
                        var row1 = row0.find(".addon-gui-saveScreenshot-div1");
                        var row2 = row0.find(".addon-gui-saveScreenshot-div2");
                        span0.hide();
                        row1.hide();
                        row2.hide();
                    },
                    onSave: function (con) {
                        var target = con.find(".addon-gui-saveScreenshot-target").val();
                        var url = con.find(".addon-gui-saveScreenshot-url").val();
                        var filepath = con.find(".addon-gui-saveScreenshot-filepath").val();
                        return {
                            target: target,
                            url: url,
                            filepath: filepath,
                            performCheck: false
                        };
                    }
                },
                // plugin for GUI-setCookies
                {
                    name: "addon:GUI-setCookies",
                    label: "GUI-setCookies",
                    onAddItem: function (opt) {
                        // opt contains:
                        // - node: target node
                        // - event: event name
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        // - data: initial data
                        var node = opt.node;
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var data = opt.data;

                        // row0: target
                        var span0 = $("<span/>", {
                            class: "addon-gui-setCookies-span0"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row0);
                        var targetField = $("<input/>", {
                            placeholder: "browser instance name",
                            type: "text",
                            class: "addon-gui-setCookies-target",
                        }).css({
                            display: "inline-block",
                            "margin-left": "8px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span0);
                        if (data && data.target) {
                            targetField.val(data.target);
                        }

                        // row1: cookie
                        var row1 = $("<div/>", {
                            class: "addon-gui-setCookies-div1"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span1 = $("<span/>", {
                            class: "addon-gui-setCookies-span1"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row1);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("cookie").appendTo(span1);
                        var cookieField = $("<input/>", {
                            placeholder: "cookies settings",
                            class: "addon-gui-setCookies-cookie",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span1);
                        $(cookieField).typedInput({
                            default: "json",
                            types: [
                                "json"
                            ]
                        });
                        if (data && data.cookie) {
                            $(cookieField).typedInput("value", data.cookie);
                        }

                        span0.hide();
                        row1.hide();
                        return true;
                    },
                    onSelect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-setCookies-span0");
                        var row1 = row0.find(".addon-gui-setCookies-div1");
                        span0.show();
                        row1.show();
                    },
                    onUnselect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-setCookies-span0");
                        var row1 = row0.find(".addon-gui-setCookies-div1");
                        span0.hide();
                        row1.hide();
                    },
                    onSave: function (con) {
                        var target = con.find(".addon-gui-setCookies-target").val();
                        var cookie = con.find(".addon-gui-setCookies-cookie").typedInput("value");
                        return {
                            target: target,
                            cookie : cookie,
                            performCheck: false
                        };
                    }
                },
                // plugin for GUI-setTimeout
                {
                    name: "addon:GUI-setTimeout",
                    label: "GUI-setTimeout",
                    onAddItem: function (opt) {
                        // opt contains:
                        // - node: target node
                        // - event: event name
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        // - data: initial data
                        var node = opt.node;
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var data = opt.data;

                        // row0: target
                        var span0 = $("<span/>", {
                            class: "addon-gui-setTimeout-span0"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row0);
                        var targetField = $("<input/>", {
                            placeholder: "browser instance name",
                            type: "text",
                            class: "addon-gui-setTimeout-target",
                        }).css({
                            display: "inline-block",
                            "margin-left": "8px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span0);
                        if (data && data.target) {
                            targetField.val(data.target);
                        }

                        // row1: timeout
                        var row1 = $("<div/>", {
                            class: "addon-gui-setTimeout-div1"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span1 = $("<span/>", {
                            class: "addon-gui-setTimeout-span1"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row1);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("timeout").appendTo(span1);
                        var timeoutField = $("<input/>", {
                            placeholder: "timeouts settings",
                            class: "addon-gui-setTimeout-timeout",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span1);
                        $(timeoutField).typedInput({
                            default: "json",
                            types: [
                                "json"
                            ]
                        });
                        if (data && data.timeout) {
                            $(timeoutField).typedInput("value", data.timeout);
                        }

                        span0.hide();
                        row1.hide();
                        return true;
                    },
                    onSelect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-setTimeout-span0");
                        var row1 = row0.find(".addon-gui-setTimeout-div1");
                        span0.show();
                        row1.show();
                    },
                    onUnselect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-setTimeout-span0");
                        var row1 = row0.find(".addon-gui-setTimeout-div1");
                        span0.hide();
                        row1.hide();
                    },
                    onSave: function (con) {
                        var target = con.find(".addon-gui-setTimeout-target").val();
                        var timeout = con.find(".addon-gui-setTimeout-timeout").typedInput("value");
                        return {
                            target: target,
                            timeout: timeout,
                            performCheck: false
                        };
                    }
                },
                // plugin for GUI-waitUntil
                {
                    name: "addon:GUI-waitUntil",
                    label: "GUI-waitUntil",
                    onAddItem: function (opt) {
                        // opt contains:
                        // - node: target node
                        // - event: event name
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        // - data: initial data
                        var node = opt.node;
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var data = opt.data;

                        // row0: target
                        var span0 = $("<span/>", {
                            class: "addon-gui-waitUntil-span0"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row0);
                        var targetField = $("<input/>", {
                            placeholder: "browser instance name",
                            type: "text",
                            class: "addon-gui-waitUntil-target",
                        }).css({
                            display: "inline-block",
                            "margin-left": "8px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span0);
                        if (data && data.target) {
                            targetField.val(data.target);
                        }

                        // row1: selector
                        var row1 = $("<div/>", {
                            class: "addon-gui-waitUntil-div1"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span1 = $("<span/>", {
                            class: "addon-gui-waitUntil-span1"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row1);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("selector").appendTo(span1);
                        var selectorField = $("<input/>", {
                            placeholder: "element selector",
                            type: "text",
                            class: "addon-gui-waitUntil-selector",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span1);
                        if (data && data.selector) {
                            selectorField.val(data.selector);
                        }

                        // row2: value
                        var row2 = $("<div/>", {
                            class: "addon-gui-waitUntil-div2"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span2 = $("<span/>", {
                            class: "addon-gui-waitUntil-span2"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row2);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("value").appendTo(span2);
                        var valueField = $("<input/>", {
                            placeholder: "element value or regexp",
                            type: "text",
                            class: "addon-gui-waitUntil-value",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span2);
                        $(valueField).typedInput({
                            default: "str",
                            types: [
                                "str","re"
                            ]
                        });
                        if (data && data.value && data.type) {
                            $(valueField).typedInput("value", data.value);
                            $(valueField).typedInput("type", data.type);
                        }

                        // row3: timeout
                        var row3 = $("<div/>", {
                            class: "addon-gui-waitUntil-div3"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span3 = $("<span/>", {
                            class: "addon-gui-waitUntil-span3"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row3);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("timeout").appendTo(span3);
                        var timeoutField = $("<input/>", {
                            //placeholder: "",
                            type: "text",
                            class: "addon-gui-waitUntil-timeout"
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "105pt"
                        }).appendTo(span3);
                        $(timeoutField).typedInput({
                            default: "num",
                            types: [
                                "num"
                            ]
                        });
                        $("<label/>", {
                        }).css({
                            "text-align": "left",
                            width: "100px",
                            "margin-left": "5px"
                        }).text("ms").appendTo(span3);

                        if (data && data.timeout) {
                            $(timeoutField).typedInput("value", data.timeout);
                        } else {
                            $(timeoutField).typedInput("value", 5000);
                        }

                        span0.hide();
                        row1.hide();
                        row2.hide();
                        row3.hide();
                        return true;
                    },
                    onSelect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-waitUntil-span0");
                        var row1 = row0.find(".addon-gui-waitUntil-div1");
                        var row2 = row0.find(".addon-gui-waitUntil-div2");
                        var row3 = row0.find(".addon-gui-waitUntil-div3");
                        span0.show();
                        row1.show();
                        row2.show();
                        row3.show();
                    },
                    onUnselect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-waitUntil-span0");
                        var row1 = row0.find(".addon-gui-waitUntil-div1");
                        var row2 = row0.find(".addon-gui-waitUntil-div2");
                        var row3 = row0.find(".addon-gui-waitUntil-div3");
                        span0.hide();
                        row1.hide();
                        row2.hide();
                        row3.hide();
                    },
                    onSave: function (con) {
                        var target = con.find(".addon-gui-waitUntil-target").val();
                        var selector = con.find(".addon-gui-waitUntil-selector").val();
                        var type = con.find(".addon-gui-waitUntil-value").typedInput("type");
                        var value = con.find(".addon-gui-waitUntil-value").typedInput("value");
                        var timeout = con.find(".addon-gui-waitUntil-timeout").typedInput("value");
                        return {
                            target: target,
                            selector: selector,
                            type: type,
                            value: value,
                            timeout: timeout,
                            performCheck: false
                        };
                    }
                },
                // plugin for GUI-addValue
                {
                    name: "addon:GUI-addValue",
                    label: "GUI-addValue",
                    onAddItem: function (opt) {
                        // opt contains:
                        // - node: target node
                        // - event: event name
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        // - data: initial data
                        var node = opt.node;
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var data = opt.data;

                        // row0: target
                        var span0 = $("<span/>", {
                            class: "addon-gui-addValue-span0"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row0);
                        var targetField = $("<input/>", {
                            placeholder: "browser instance name",
                            type: "text",
                            class: "addon-gui-addValue-target",
                        }).css({
                            display: "inline-block",
                            "margin-left": "8px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span0);
                        if (data && data.target) {
                            targetField.val(data.target);
                        }

                        // row1: selector
                        var row1 = $("<div/>", {
                            class: "addon-gui-addValue-div1"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span1 = $("<span/>", {
                            class: "addon-gui-addValue-span1"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row1);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("selector").appendTo(span1);
                        var selectorField = $("<input/>", {
                            placeholder: "element selector",
                            type: "text",
                            class: "addon-gui-addValue-selector",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span1);
                        if (data && data.selector) {
                            selectorField.val(data.selector);
                        }

                        // row2: value
                        var row2 = $("<div/>", {
                            class: "addon-gui-addValue-div2"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span2 = $("<span/>", {
                            class: "addon-gui-addValue-span2"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row2);
                        $("<label/>", {
                        }).css({
                            display: "inline-block",
                            "text-align": "right",
                            width: "100px"
                        }).text("value").appendTo(span2);
                        var valueField = $("<input/>", {
                            placeholder: "value to add",
                            type: "text",
                            class: "addon-gui-addValue-value",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span2);
                        $(valueField).typedInput({
                            default: "str",
                            types: [
                                "str", "num", "bool"
                            ]
                        });
                        if (data && data.value) {
                            $(valueField).typedInput("value", data.value);
                        }

                        span0.hide();
                        row1.hide();
                        row2.hide();
                        return true;
                    },
                    onSelect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-addValue-span0");
                        var row1 = row0.find(".addon-gui-addValue-div1");
                        var row2 = row0.find(".addon-gui-addValue-div2");
                        span0.show();
                        row1.show();
                        row2.show();
                    },
                    onUnselect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-addValue-span0");
                        var row1 = row0.find(".addon-gui-addValue-div1");
                        var row2 = row0.find(".addon-gui-addValue-div2");
                        span0.hide();
                        row1.hide();
                        row2.hide();
                    },
                    onSave: function (con) {
                        var target = con.find(".addon-gui-addValue-target").val();
                        var selector = con.find(".addon-gui-addValue-selector").val();
                        var value = con.find(".addon-gui-addValue-value").typedInput("value");
                        return {
                            target: target,
                            selector: selector,
                            value: value,
                            performCheck: false
                        };
                    }
                },
                // plugin for GUI-clearValue
                {
                    name: "addon:GUI-clearValue",
                    label: "GUI-clearValue",
                    onAddItem: function (opt) {
                        // opt contains:
                        // - node: target node
                        // - event: event name
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        // - data: initial data
                        var node = opt.node;
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var data = opt.data;

                        // row0: target
                        var span0 = $("<span/>", {
                            class: "addon-gui-clearValue-span0"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row0);
                        var targetField = $("<input/>", {
                            placeholder: "browser instance name",
                            type: "text",
                            class: "addon-gui-clearValue-target",
                        }).css({
                            display: "inline-block",
                            "margin-left": "8px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span0);
                        if (data && data.target) {
                            targetField.val(data.target);
                        }

                        // row1: selector
                        var row1 = $("<div/>", {
                            class: "addon-gui-clearValue-div1"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span1 = $("<span/>", {
                            class: "addon-gui-clearValue-span1"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row1);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("selector").appendTo(span1);
                        var selectorField = $("<input/>", {
                            placeholder: "element selector",
                            type: "text",
                            class: "addon-gui-clearValue-selector",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span1);
                        if (data && data.selector) {
                            selectorField.val(data.selector);
                        }

                        span0.hide();
                        row1.hide();
                        return true;
                    },
                    onSelect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-clearValue-span0");
                        var row1 = row0.find(".addon-gui-clearValue-div1");
                        span0.show();
                        row1.show();
                    },
                    onUnselect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-clearValue-span0");
                        var row1 = row0.find(".addon-gui-clearValue-div1");
                        span0.hide();
                        row1.hide();
                    },
                    onSave: function (con) {
                        var target = con.find(".addon-gui-clearValue-target").val();
                        var selector = con.find(".addon-gui-clearValue-selector").val();
                        return {
                            target: target,
                            selector: selector,
                            performCheck: false
                        };
                    }
                },
                // plugin for GUI-click
                {
                    name: "addon:GUI-click",
                    label: "GUI-click",
                    onAddItem: function (opt) {
                        // opt contains:
                        // - node: target node
                        // - event: event name
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        // - data: initial data
                        var node = opt.node;
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var data = opt.data;

                        // row0: target
                        var span0 = $("<span/>", {
                            class: "addon-gui-click-span0"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row0);
                        var targetField = $("<input/>", {
                            placeholder: "browser instance name",
                            type: "text",
                            class: "addon-gui-click-target",
                        }).css({
                            display: "inline-block",
                            "margin-left": "8px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span0);
                        if (data && data.target) {
                            targetField.val(data.target);
                        }

                        // row1: selector
                        var row1 = $("<div/>", {
                            class: "addon-gui-click-div1"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span1 = $("<span/>", {
                            class: "addon-gui-click-span1"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row1);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("selector").appendTo(span1);
                        var selectorField = $("<input/>", {
                            placeholder: "element selector",
                            type: "text",
                            class: "addon-gui-click-selector",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span1);
                        if (data && data.selector) {
                            selectorField.val(data.selector);
                        }

                        // row2: kind
                        var row2 = $("<div/>", {
                            class: "addon-gui-click-div2"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span2 = $("<span/>", {
                            class: "addon-gui-click-span2"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row2);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("kind").appendTo(span2);
                        var kindField = $("<select/>", {
                            placeholder: "value",
                            type: "text",
                            class: "addon-gui-click-kind",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "100pt"
                        }).appendTo(span2);
                        $(kindField).empty();
                        $("<option/>").text("click").val("single").appendTo(kindField);
                        $("<option/>").text("double click").val("double").appendTo(kindField);
                        if (data && data.clickkind) {
                            $(kindField).val(data.clickkind);
                        }

                        span0.hide();
                        row1.hide();
                        row2.hide();
                        return true;
                    },
                    onSelect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-click-span0");
                        var row1 = row0.find(".addon-gui-click-div1");
                        var row2 = row0.find(".addon-gui-click-div2");
                        span0.show();
                        row1.show();
                        row2.show();
                    },
                    onUnselect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-click-span0");
                        var row1 = row0.find(".addon-gui-click-div1");
                        var row2 = row0.find(".addon-gui-click-div2");
                        span0.hide();
                        row1.hide();
                        row2.hide();
                    },
                    onSave: function (con) {
                        var target = con.find(".addon-gui-click-target").val();
                        var selector = con.find(".addon-gui-click-selector").val();
                        var clickkind = con.find(".addon-gui-click-kind").val();
                        return {
                            target: target,
                            selector: selector,
                            clickkind: clickkind,
                            performCheck: false
                        };
                    }
                },
                // plugin for GUI-getValue
                {
                    name: "addon:GUI-getValue",
                    label: "GUI-getValue",
                    onAddItem: function (opt) {
                        // opt contains:
                        // - node: target node
                        // - event: event name
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        // - data: initial data
                        var node = opt.node;
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var data = opt.data;

                        // row0: target
                        var span0 = $("<span/>", {
                            class: "addon-gui-getValue-span0"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row0);
                        var targetField = $("<input/>", {
                            placeholder: "browser instance name",
                            type: "text",
                            class: "addon-gui-getValue-target",
                        }).css({
                            display: "inline-block",
                            "margin-left": "8px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span0);
                        if (data && data.target) {
                            targetField.val(data.target);
                        }

                        // row1: selector
                        var row1 = $("<div/>", {
                            class: "addon-gui-getValue-div1"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span1 = $("<span/>", {
                            class: "addon-gui-getValue-span1"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row1);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("selector").appendTo(span1);
                        var selectorField = $("<input/>", {
                            placeholder: "element selector",
                            type: "text",
                            class: "addon-gui-getValue-selector",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span1);
                        if (data && data.selector) {
                            selectorField.val(data.selector);
                        }

                        // row2: kind
                        var row2 = $("<div/>", {
                            class: "addon-gui-getValue-div2"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span2 = $("<span/>", {
                            class: "addon-gui-getValue-span2"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row2);
                        $("<label/>", {
                        }).css({
                            display: "inline-block",
                            "text-align": "right",
                            width: "100px"
                        }).text("kind").appendTo(span2);
                        var kindField = $("<select/>", {
                            placeholder: "value",
                            type: "text",
                            class: "addon-gui-getValue-kind",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "100pt"
                        }).appendTo(span2);
                        $(kindField).empty();
                        $("<option/>").text("attribute").val("attr").appendTo(kindField);
                        $("<option/>").text("property").val("prop").appendTo(kindField);
                        $("<option/>").text("tag").val("tag").appendTo(kindField);
                        $("<option/>").text("text").val("text").appendTo(kindField);
                        $("<option/>").text("value").val("val").appendTo(kindField);
                        if (data && data.getkind) {
                            $(kindField).val(data.getkind);
                        }

                        // row3: name(option prop or attr)
                        var row3 = $("<div/>", {
                            class: "addon-gui-getValue-div3"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span3 = $("<span/>", {
                            class: "addon-gui-getValue-span3"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row3);
                        $("<label/>", {
                        }).css({
                            display: "inline-block",
                            "text-align": "right",
                            width: "100px"
                        }).text("name").appendTo(span3);
                        var getnameField = $("<input/>", {
                            placeholder: "name for properties or attributes",
                            type: "text",
                            class: "addon-gui-getValue-name",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span3);
                        if (data && data.getname) {
                            getnameField.val(data.getname);
                        }

                        // row4: loc
                        var row4 = $("<div/>", {
                            class: "addon-gui-getValue-div4"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span4 = $("<span/>", {
                            class: "addon-gui-getValue-span4"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row4);
                        $("<label/>", {
                        }).css({
                            display: "inline-block",
                            "text-align": "right",
                            width: "100px"
                        }).text("loc").appendTo(span4);
                        var locField = $("<input/>", {
                            placeholder: "store value name",
                            class: "addon-gui-getValue-loc"
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span4);
                        $(locField).typedInput({
                            default: "flow",
                            types: [
                                "flow", "global"
                            ]
                        });
                        if (data && data.type && data.value) {
                            $(locField).typedInput("type", data.type);
                            $(locField).typedInput("value", data.value);
                        }

                        span0.hide();
                        row1.hide();
                        row2.hide();
                        row3.hide();
                        row4.hide();
                        return true;
                    },
                    onSelect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-getValue-span0");
                        var row1 = row0.find(".addon-gui-getValue-div1");
                        var row2 = row0.find(".addon-gui-getValue-div2");
                        var row3 = row0.find(".addon-gui-getValue-div3");
                        var row4 = row0.find(".addon-gui-getValue-div4");
                        span0.show();
                        row1.show();
                        row2.show();
                        row3.show();
                        row4.show();
                    },
                    onUnselect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-getValue-span0");
                        var row1 = row0.find(".addon-gui-getValue-div1");
                        var row2 = row0.find(".addon-gui-getValue-div2");
                        var row3 = row0.find(".addon-gui-getValue-div3");
                        var row4 = row0.find(".addon-gui-getValue-div4");
                        span0.hide();
                        row1.hide();
                        row2.hide();
                        row3.hide();
                        row4.hide();
                    },
                    onSave: function (con) {
                        var target = con.find(".addon-gui-getValue-target").val();
                        var selector = con.find(".addon-gui-getValue-selector").val();
                        var getkind = con.find(".addon-gui-getValue-kind").val();
                        var getname = con.find(".addon-gui-getValue-name").val();
                        var type = con.find(".addon-gui-getValue-loc").typedInput("type");
                        var value = con.find(".addon-gui-getValue-loc").typedInput("value");
                        return {
                            target: target,
                            selector: selector,
                            getkind: getkind,
                            getname: getname,
                            type: type,
                            value: value,
                            performCheck: false
                        };
                    }
                },
                // plugin for GUI-moveTo
                {
                    name: "addon:GUI-moveTo",
                    label: "GUI-moveTo",
                    onAddItem: function (opt) {
                        // opt contains:
                        // - node: target node
                        // - event: event name
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        // - data: initial data
                        var node = opt.node;
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var data = opt.data;

                        // row0: target
                        var span0 = $("<span/>", {
                            class: "addon-gui-moveTo-span0"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row0);
                        var targetField = $("<input/>", {
                            placeholder: "browser instance name",
                            type: "text",
                            class: "addon-gui-moveTo-target",
                        }).css({
                            display: "inline-block",
                            "margin-left": "8px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span0);
                        if (data && data.target) {
                            targetField.val(data.target);
                        }

                        // row1: selector
                        var row1 = $("<div/>", {
                            class: "addon-gui-moveTo-div1"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span1 = $("<span/>", {
                            class: "addon-gui-moveTo-span1"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row1);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("selector").appendTo(span1);
                        var selectorField = $("<input/>", {
                            placeholder: "element selector",
                            type: "text",
                            class: "addon-gui-moveTo-selector",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span1);
                        if (data && data.selector) {
                            selectorField.val(data.selector);
                        }

                        span0.hide();
                        row1.hide();
                        return true;
                    },
                    onSelect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-moveTo-span0");
                        var row1 = row0.find(".addon-gui-moveTo-div1");
                        span0.show();
                        row1.show();
                    },
                    onUnselect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-moveTo-span0");
                        var row1 = row0.find(".addon-gui-moveTo-div1");
                        span0.hide();
                        row1.hide();
                    },
                    onSave: function (con) {
                        var target = con.find(".addon-gui-moveTo-target").val();
                        var selector = con.find(".addon-gui-moveTo-selector").val();
                        return {
                            target: target,
                            selector: selector,
                            performCheck: false
                        };
                    }
                },
                // plugin for GUI-setValue
                {
                    name: "addon:GUI-setValue",
                    label: "GUI-setValue",
                    onAddItem: function (opt) {
                        // opt contains:
                        // - node: target node
                        // - event: event name
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        // - data: initial data
                        var node = opt.node;
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var data = opt.data;

                        // row0: target
                        var span0 = $("<span/>", {
                            class: "addon-gui-setValue-span0"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row0);
                        var targetField = $("<input/>", {
                            placeholder: "browser instance name",
                            type: "text",
                            class: "addon-gui-setValue-target",
                        }).css({
                            display: "inline-block",
                            "margin-left": "8px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span0);
                        if (data && data.target) {
                            targetField.val(data.target);
                        }

                        // row1: selector
                        var row1 = $("<div/>", {
                            class: "addon-gui-setValue-div1"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span1 = $("<span/>", {
                            class: "addon-gui-setValue-span1"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row1);
                        $("<label/>", {
                        }).css({
                           display: "inline-block",
                           "text-align": "right",
                           width: "100px"
                        }).text("selector").appendTo(span1);
                        var selectorField = $("<input/>", {
                            placeholder: "element selector",
                            type: "text",
                            class: "addon-gui-setValue-selector",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span1);
                        if (data && data.selector) {
                            selectorField.val(data.selector);
                        }

                        // row2: value
                        var row2 = $("<div/>", {
                            class: "addon-gui-setValue-div2"
                        }).css({
                            "margin-top": "11px"
                        }).appendTo(row0);
                        var span2 = $("<span/>", {
                            class: "addon-gui-setValue-span2"
                        }).css({
                            "margin-left": "5px"
                        }).appendTo(row2);
                        $("<label/>", {
                        }).css({
                            display: "inline-block",
                            "text-align": "right",
                            width: "100px"
                        }).text("value").appendTo(span2);
                        var valueField = $("<input/>", {
                            placeholder: "value to set",
                            type: "text",
                            class: "addon-gui-setValue-value",
                        }).css({
                            display: "inline-block",
                            "margin-left": "13px",
                            width: "calc(100% - 130px)"
                        }).appendTo(span2);
                        $(valueField).typedInput({
                            default: "str",
                            types: [
                                "str", "num", "bool"
                            ]
                        });
                        if (data && data.value) {
                            $(valueField).typedInput("value", data.value);
                        }

                        span0.hide();
                        row1.hide();
                        row2.hide();
                        return true;
                    },
                    onSelect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-setValue-span0");
                        var row1 = row0.find(".addon-gui-setValue-div1");
                        var row2 = row0.find(".addon-gui-setValue-div2");
                        span0.show();
                        row1.show();
                        row2.show();
                    },
                    onUnselect: function (opt) {
                        // opt contains:
                        // - container: container of editable list,
                        // - selectRow: first row of the container
                        var con = opt.container;
                        var row0 = opt.selectRow;
                        var span0 = row0.find(".addon-gui-setValue-span0");
                        var row1 = row0.find(".addon-gui-setValue-div1");
                        var row2 = row0.find(".addon-gui-setValue-div2");
                        span0.hide();
                        row1.hide();
                        row2.hide();
                    },
                    onSave: function (con) {
                        var target = con.find(".addon-gui-setValue-target").val();
                        var selector = con.find(".addon-gui-setValue-selector").val();
                        var value = con.find(".addon-gui-setValue-value").typedInput("value");
                        return {
                            target: target,
                            selector: selector,
                            value: value,
                            performCheck: false
                        };
                    }
                }
            ];
        }
    });
})();
</script>
